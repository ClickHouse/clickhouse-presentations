<!DOCTYPE html>
<html lang="en">
<head>
    <title>ClickHouse Meetup in Moscow</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="pictures/preview.jpg">
    <meta property="og:title" content="ClickHouse Meetup in Moscow">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="pictures/preview.jpg">
    <link rel="stylesheet" href="https://presentations.clickhouse.com/shower/themes/clickhouse/styles/styles.css">

    <style>
        code { display: block; white-space: pre; background-color: #EEE; }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>ClickHouse Meetup in Moscow</h1>
    </header>
    <section class="slide" id="cover">
        <h1 style="margin-top: 200px;"><span>New ClickHouse Features<br/>and Future Plans</span></h1>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Custom Partitioning Key</p>
        <code>CREATE TABLE ... ENGINE = MergeTree
  ORDER BY CounterID, Date
  PARTITION BY toStartOfWeek(Date)
  SETTINGS index_granularity = 8192</code>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Distributed DDL Queries</p>
        <code>CREATE TABLE ... ON CLUSTER cluster</code>
        <p style="color: #888;"><br/>
        * doesn't work with cross-replication;<br/>
        * for ALTER of Replicated tables, requires enabling an option;</p>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Geospatial Functions:</p>
        <p>&mdash; pointInPolygon;</p>
        <p>&mdash; pointInEllipses;</p>
        <p>&mdash; greatCircleDistance;</p>
        <code>SELECT pointInPolygon((lat, lon),
    [(6, 0), (8, 4), (5, 8), (0, 2), ...])</code>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>CatBoost Model Integration</p>
        <code>SELECT modelEvaluate('purchase', f1, ... fn)</code>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Working with Date and Time Intervals:</p>
        <code>SELECT date + INTERVAL 1 MONTH</code>
        <p><br/>&mdash; support for time zones with non-integer UTC offset;</p>
        <p>&mdash; extending the valid range to year 2105.</p>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Array Functions:</p>
        <p>&mdash; arrayConcat, arraySlice;</p>
        <p>&mdash; arrayPushFront, arrayPushBack, arrayPopFront, arrayPopBack;</p>
        <p>&mdash; arrayReduce, arraySort, arrayReverseSort, arrayStringConcat;</p>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Dictionary Improvements</p>
        <p>&mdash; dictionary introspection:</p>
        <code>CREATE DATABASE dictionaries ENGINE = Dictionary</code>
        <p><br/>&mdash; invalidate_query for dictionary updates;</p>
        <p>&mdash; SYSTEM RELOAD DICTIONARY;</p>
    </section>

    <section class="slide">
        <h2>Done and Happy</h2>
        <p>Sessions in HTTP Interface:</p>
        <code style="font-size: 16pt;">curl 'http://host:port/?session_id=123&amp;session_timeout=60' \
    -d 'CREATE TEMPORARY TABLE t'</code>
        <p><br/>Native SSL support for HTTP and TCP server.</p>
        <p>Sending progress in HTTP headers.</p>
    </section>


    <section class="slide">
        <h2>Done, but Not Quite</h2>
    </section>

    <section class="slide">
        <h2>Done, but Not Quite</h2>
        <p>Improvements for SQL Compatibility:</p>
        <p>&mdash; limited support for table aliases and compound names;</p>
        <p>&mdash; ANSI-style name quoting;</p>
        <p>&mdash; data type aliases;</p>
        <p>&mdash; INSERT SELECT by positions, not by names;</p>
        <p>&mdash; type casting in INSERT SELECT;</p>
        <p>&mdash; NULLS FIRST/LAST for ORDER BY.</p>
    </section>

    <section class="slide">
        <h2>Done, but Not Quite</h2>
        <p>ODBC Driver:</p>
        <p>+ BI tools started working;</p>
        <p>&minus; still many holes in implementation;</p>
    </section>

    <section class="slide">
        <h2>Done, but Not Quite</h2>
        <p>NULL Support.</p>
    </section>


    <section class="slide">
        <h2>Will Do Right Now</h2>
    </section>

    <section class="slide">
        <h2>Will Do Right Now</h2>
        <p>Clear Timezone Handling.</p>
        <p>What will the query return?</p>
        <code>SELECT toStartOfHour(
    toDateTime('2017-12-12 01:02:03'),
    'Europe/London') AS t</code>
    </section>

    <section class="slide">
        <h2>Will Do Right Now</h2>
        <p>Full Multi-dimensional Array Support.</p>
        <code>CREATE TABLE t
(
    x Array(Array(String)),
    z Nested(
        x Array(String),
        y Nested(...))
)
ENGINE = MergeTree ORDER BY x</code>
    </section>

    <section class="slide">
        <h2>Will Do Right Now</h2>
        <p>Copying Data Between Clusters.</p>
    </section>

    <section class="slide">
        <h2>Will Do Right Now</h2>
        <p>Connecting External Tables from MySQL, ODBC.</p>
        <p>Table functions mysql, odbc.</p>

        <code>SELECT ...
FROM mysql(
    'host:port',
    'db', 'table',
    'user', 'password')</code>
    </section>

    <section class="slide">
        <h2>Will Do Right Now</h2>
        <p>O_DIRECT When Merging Large Parts.</p>
    </section>


    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
    </section>

    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>Support for Computed DEFAULT Expressions for Semi-structured Formats JSONEachRow, TSKV.</p>
        <p>Support for Protobuf and Parquet Formats for Input-Output.
    </section>

    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>Using Index for Queries with IN (subquery).</p>
        <p>Moving Conditions from WHERE Inside Subqueries.</p>
        <p>Type Casting for UNION ALL.</p>
        <p>Support for Subqueries in VIEW.</p>
    </section>

    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>Support for Short-circuit Expression Evaluation.</p>
        <code>SELECT number != 0
    ? intDiv(10, number)
    : 0
FROM system.numbers LIMIT 10</code>
        <p><br/>WITH ROLLUP and WITH CUBE Modifiers for GROUP BY.</p>
        <p>Using Primary Key for ORDER BY, GROUP BY.</p>
    </section>


    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>Ability to Use Custom Compression Algorithms<br/>for Individual Columns.</p>
        <p>Index Structures for Skipping Data Blocks in Table.</p>
        <p>Ability to Store Data on Different Partitions Within a Server.</p>
    </section>

    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>Ability to Create Dictionaries via DDL Queries.</p>
        <p>Don't Return Empty Set When Aggregating over Empty Set.</p>
        <p>LDAP Integration.</p>
    </section>

    <section class="slide">
        <h2>Slightly Later Than Right Now</h2>
        <p>UPDATE/DELETE Support.</p>
        <p>Resource Pools for Query Execution.</p>
        <p>Proper Syntax for JOIN.</p>
        <p>Cloud Tables.</p>
    </section>

    <section class="slide">
        <h2>.</h2>
    </section>

    <section class="slide">
        <h2>.</h2>
        <p><span>Website: <a href="https://clickhouse.com/">https://clickhouse.com/</a></span></p>
        <p><span>Google groups: <a href="https://groups.google.com/forum/#!forum/clickhouse">https://groups.google.com/forum/#!forum/clickhouse</a></span></p>
        <p><span>Mailing list: clickhouse-feedback@yandex-team.com</span></p>
        <p><span>Telegram chat: <a href="https://telegram.me/clickhouse_ru">https://telegram.me/clickhouse_ru</a> (already 1238 participants)<br/>and <a href="https://telegram.me/clickhouse_en">https://telegram.me/clickhouse_en</a></span></p>
        <p><span>GitHub: <a href="https://github.com/ClickHouse/ClickHouse/">https://github.com/ClickHouse/ClickHouse/</a></span></p>
        <p><span>Twitter: <a href="https://twitter.com/ClickHouseDB">https://twitter.com/ClickHouseDB</a></span></p>
    </section>

    <div class="progress"></div>
    <script src="https://presentations.clickhouse.com/shower/shower.js"></script>
<footer class="badge">
    <a href="https://presentations.clickhouse.com/">ClickHouse Theater</a>
</footer>
</body>
</html>
