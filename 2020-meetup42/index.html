<!DOCTYPE html>
<html lang="en">
<head>
    <title>ClickHouse Features: Winter/Spring 2020</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="pictures/preview.jpg">
    <meta property="og:title" content="ClickHouse Features: Winter/Spring 2020">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="pictures/preview.jpg">
    <link rel="stylesheet" href="https://presentations.clickhouse.com/shower/themes/clickhouse/styles/styles.css">

    <style>
        code { display: block; white-space: pre; background-color: #EEE; }
        p.cloud { text-align: center; line-height: 1.7; }
        p.cloud span { font-size: 14pt; color: gray; padding: 0 20px 0 20px; white-space: nowrap; }
        p.cloud_big { text-align: center; line-height: 1.7; }
        p.cloud_big span { font-size: 24pt; color: gray; padding: 0 20px 0 20px; white-space: nowrap; }
        .shower { --slide-ratio: calc(16 / 10); }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>ClickHouse: Winter/Spring 2020</h1>
        <p>Author: Alexey Milovidov, 2020-04-04.</p>
    </header>

    <section class="slide">
        <h1>ClickHouse: Winter/Spring 2020</h1>
        <p style="margin-top: 100px;">Zoom: <a href="https://yandex.zoom.us/j/845102379">https://yandex.zoom.us/j/845102379</a></p>
        <p>YouTube: <a href="https://www.youtube.com/c/ClickHouseDB">https://www.youtube.com/c/ClickHouseDB</a></p>
        <p>Telegram chat: <a href="https://telegram.me/clickhouse_ru">https://telegram.me/clickhouse_ru</a>, <a href="https://telegram.me/clickhouse_en">clickhouse_en</a></p>
        <p>Yandex.Eda, promo code: <b>ClickHouse_break</b><br/>(<span style="color: red;">only for first 100 participants</span>)</p>
    </section>

    <section class="slide" id="cover">
        <h1 style="margin-top: 180px; font-size: 48pt;"><span>ClickHouse Features:<br/>Winter/Spring 2020</span></h1>
    </section>

    <section class="slide">
        <h2>In previous episodes:</h2>
        <p class="cloud">
            <span>Tiered Storage</span>
            <span>DDL queries for dictionaries</span>
            <span>CONSTRAINTs</span>
            <span>Prepared Statements</span>
            <span>Format ORC</span>
            <span>Format Template</span>
            <span>ORDER BY optimization</span>
            <span>WITH FILL</span>
            <span>text_log</span>
            <span>metric_log</span>
            <span>Query Profiler</span>
            <span>Globs for File/URL/HDFS</span>
            <span>RPM packages</span>
            <span>neighbor</span>
            <span>os_schedule_priority</span>
            <span>ALTER MODIFY SETTING</span>
            <span>SELECT FROM VALUES</span>
            <span>COLUMNS matcher</span>
            <span>LIVE VIEW</span>
            <span>Settings constraints</span>
            <span>Row Level Security</span>
            <span>Secondary Indices</span>
            <span>TTL expressions</span>
            <span>MySQL protocol</span>
            <span>Adaptive index granularity</span>
            <span>Advanced text search</span>
            <span>JSON functions</span>
            <span>Cascade MATERIALIZED VIEWs</span>
            <span>WITH ROLLUP/CUBE</span>
            <span>ASOF JOIN</span>
            <span>Redis dictionary source</span>
            <span>Parallel parsing</span>
            <span>Template format</span>
            <span>CustomSeparated format</span>
            <span>VALUES optimization</span>
            <span>s3 import/export</span>
            <span>gzip/brotli import/export</span>
            <span>geoDistance</span>
        </p>
    </section>

<section class="slide">
<h2>Role Based Access Control</h2>
<p>And also user, access and role management with SQL queries.</p>
<p>CREATE USER / DROP USER</p>
<p>CREATE ROLE / DROP ROLE</p>
<p>GRANT / REVOKE role TO user</p>
<p>GRANT / REVOKE SELECT columns ON db.table TO role/user</p>
<p style="margin-top: 100px; font-size: 14pt; color: gray;">Доступно в версии 20.4. Разработчик &mdash; Виталий Баранов.</p>
</section>

<section class="slide">
<h2>Role Based Access Control</h2>
<p>demo?</p>
<!--
CREATE USER test IDENTIFIED WITH sha256_password BY 'hello'

clickhouse-client --user test --password hello
SELECT count() FROM test.hits

clickhouse-client
GRANT SELECT ON test.hits TO test
clickhouse-client --user test --password hello
SELECT count() FROM test.hits
-->
</section>

<section class="slide">
<h2>Non-blocking ALTER Queries</h2>
<p>... and ALTER RENAME COLUMN</p>
<p style="margin-top: 100px; font-size: 14pt; color: gray;">Доступно в версии 20.4. Разработчик &mdash; Александр Сапин.</p>
</section>

<section class="slide">
<h2>And More About ALTER</h2>
<p>ALTER MATERIALIZE TTL</p>
<p>ALTER MOVE PARTITION</p>
</section>

<section class="slide">
<h2>Adaptive Algorithm for JOIN</h2>
<p>SET join_algorithm = 'auto'</p>
<p>Automatic switching between Hash Join and Merge Join<br/>depending on memory usage.</p>
<p style="margin-top: 100px; font-size: 14pt; color: green;">Доступно в версии 20.3. Разработчик &mdash; Артём Зуйков.</p>
</section>

<section class="slide">
<h2>Adaptive Algorithm for JOIN</h2>
<p>demo?</p>
<!--
SELECT uniq(a.URL), uniq(b.URL) FROM hits_100m_obfuscated a INNER JOIN hits_100m_obfuscated b ON a.WatchID = b.WatchID;
SET join_algorithm = 'auto'
SET send_logs_level = 'trace'
-->
</section>

<section class="slide">
<h2>DateTime64</h2>
<p>Date with time with more than second precision.</p>
<p>DateTime64(3) &mdash; milliseconds.</p>
<p>DateTime64(6) &mdash; microseconds.</p>
<p>...</p>
<p style="margin-top: 100px; font-size: 14pt; color: green;">Доступно в версии 20.1. Разработчик &mdash; Василий Немков, Altinity.</p>
</section>

<section class="slide">
<h2>DateTime64</h2>
<p>В разработке &mdash; расширенный диапазон.</p>
<p>Currently 1970&ndash;2106.</p>
</section>

<section class="slide">
<h2 style="font-size: 32pt;">Write-Optimized Format of Table Parts</h2>
<code>CREATE TABLE test.hits_compact AS test.hits
    ENGINE = MergeTree ORDER BY ...
    SETTINGS min_bytes_for_wide_part = '10M'</code>
<p style="margin-top: 1em;">Speeds up small inserts.</p>
<p style="margin-top: 100px; font-size: 14pt; color: red;">Experimental feature.</p>
<p style="font-size: 14pt; color: green;">Доступно в версии 20.3. Разработчик &mdash; Антон Попов.</p>
</section>

<section class="slide">
<h2 style="font-size: 32pt;">Write-Optimized Format of Table Parts</h2>
<p>demo?</p>
<!--
time clickhouse benchmark <<< "INSERT INTO test.hits_wide (UserID) VALUES (rand())" -i 1000
time clickhouse benchmark <<< "INSERT INTO test.hits_compact (UserID) VALUES (rand())" -i 1000
-->
</section>

<section class="slide">
<h2>More Features</h2>
<p>Avro Format</p>
<p>Regexp Format</p>
<p>Prometheus Handler</p>
<p>Async mode for cache dictionaries</p>
<p>Memory Profiler</p>
<p>system.stack_trace</p>
<p>Network connections limiting</p>
<p>Full h3 support</p>
</section>

<section class="slide">
<h2>LTS Versions</h2>
<p>Version 20.3 (March 2020) becomes LTS</p>
</section>

<section class="slide">
<h2>ClickHouse Playground</h2>
<p>(alpha version)</p>
<p><a href="https://play.clickhouse.com/">https://play.clickhouse.com/</a></p>
<p>Runs on the weakest server in Yandex.Cloud.</p>
</section>

<section class="slide">
<h2>What's Next</h2>
<p>LDAP for authentication</p>
<p>Kerberos for authentication</p>
<p>LDAP for storing rights and roles</p>
</section>

<section class="slide">
<h2>What's Next</h2>
<p>ALTER RENAME COLUMN</p>
<p>Non-blocking CREATE/DROP/RENAME queries</p>
<p>Buffering and WAL for MergeTree</p>
<p>Cold data storage on top of S3 and HDFS.</p>
<p>Automated builds for FreeBSD x86_64 and Linux ppc64le.</p>
</section>

<section class="slide">
<h2>What's Next</h2>
<p>Query result caching</p>
<p>Configurable HTTP handlers</p>
<p>Data encryption at rest</p>
<p>Geographical dictionaries</p>
</section>

<section class="slide">
    <h2>Public roadmap 2020!</h2>
    <p><a href="https://clickhouse.com/docs/ru/extended_roadmap/">https://clickhouse.com/docs/ru/extended_roadmap/</a></p>
    <p>~ 500 задач с подробным описанием &mdash; зависимости, исполнители...</p>
    <p>63 of them are already done :)</p>
</section>


<section class="slide">
    <h2>.</h2>
</section>

    <div class="progress"></div>
    <script src="https://presentations.clickhouse.com/shower/shower.js"></script>
<footer class="badge">
    <a href="https://presentations.clickhouse.com/">ClickHouse Theater</a>
</footer>
</body>
</html>
