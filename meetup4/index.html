<!DOCTYPE html>
<html lang="en" style="background-color: #FFF;">
<head>
    <title>ClickHouse meetup in Novosibirsk</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="pictures/preview.jpg">
    <meta property="og:title" content="ClickHouse meetup in Novosibirsk">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="pictures/preview.jpg">
    <link rel="stylesheet" href="shower/themes/clickhouse/styles/styles.css">
    <style>
        .shower { --slide-ratio: calc(16 / 10); }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>ClickHouse meetup in Novosibirsk</h1>
    </header>

    <section class="slide" id="cover">
        <h1 style="margin-top: 200px">ClickHouse meetup<br/>in Novosibirsk</h1>
    </section>

    <section class="slide">
        <h2>ClickHouse: Present and Future</h2>
    </section>

    <section class="slide">
        <h2>What is ClickHouse?</h2>
        <p>ClickHouse - distributed analytical column-oriented DBMS</p>
    </section>

    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>How row-oriented systems work:</p>
        <p><img src="pictures/row_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>How column-oriented systems work:</p>
        <p><img src="pictures/column_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why ClickHouse?</h2>
        <p>Nothing ready-made was suitable.</p>
        <p>So we made ClickHouse.</p>
        <p>&laquo;Evolution of Data Structures in Yandex.Metrica&raquo;</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/273305/">https://habrahabr.ru/company/yandex/blog/273305/</a></p>
    </section>
    <section class="slide">
        <h2>Metrica 2.0</h2>
        <img src="pictures/metrika2.png" style="height:70%"/>
    </section>
    <section class="slide">
        <h2>In Brief</h2>
        <ul>
            <li>column-oriented</li>
            <li>linear scalability</li>
            <li>fault tolerance</li>
            <li>real-time data loading</li>
            <li>online (sub-second) queries</li>
            <li>SQL dialect support + extensions<br/>(arrays, nested data structures, domain-specific functions, sampling)</li>
        </ul>
    </section>
    <section class="slide">
        <h2>Main Metrica Cluster</h2>
        <ul style="font-size:30px;">
            <li>>20 trillion rows</li>
            <li>460 servers</li>
            <li>data processing speed up to two terabytes per second</li>
        </ul>
        <p style="font-size:60%; margin-top:2em">* If you want to try ClickHouse, one server is enough.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse at Yandex</h2>
        <p>We managed to make the system relatively user-friendly.</p>
        <p>From the very beginning we had detailed documentation.</p>
        <p>Within a couple of years, ClickHouse spread to other Yandex departments.</p>
        <p>Mail, Market, Direct, Webmaster, AdFox, Infrastructure, Business Analytics...</p>
        <p>There are cases when analysts independently installed ClickHouse on virtual machines and successfully used it without any questions.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Then we decided — ClickHouse is too good a system for us to keep it to ourselves.</p>
        <p>To make it more fun, we need to get people outside hooked on ClickHouse, let them enjoy it. We decided to go open-source.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Apache 2.0 license — minimum restrictions.</p>
        <p>Goal — maximum product distribution.</p>
        <p>We want Yandex's product to be used worldwide.</p>
        <p>See "Yandex Opens ClickHouse"</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/303282/">https://habrahabr.ru/company/yandex/blog/303282/</a></p>
    </section>
    <section class="slide">
        <h2>When to Use ClickHouse</h2>
        <p>Well-structured, cleaned, immutable events.</p>
        <p>&nbsp;</p>
        <p>Click stream. Web analytics. Ad&nbsp;networks. RTB. E-commerce.</p>
        <p>Online game analytics. Sensor and monitoring data. Telecom&nbsp;data.</p>
        <p>Financial transactions. Stock market analytics.</p>
    </section>
    <section class="slide">
        <h2 style="font-size: 40px;">When <span style="color:red;">NOT to</span> Use ClickHouse</h2>
        <p><span style="font-size: 30px;color: #888;">OLTP</span><br/>ClickHouse has no UPDATE and full-fledged transactions.</p>
        <p><span style="font-size: 30px;color: #888;">Key-Value</span><br/>If you need frequent update queries by key, use another solution.</p>
        <p><span style="font-size: 30px;color: #888;">Blob-store, document oriented</span><br/>ClickHouse is designed for a large number of fine-grained data.</p>
        <p><span style="font-size: 30px;color: #888;">Over-normalized data</span><br/>Better to make a wide fact table.</p>
    </section>
    <section class="slide">
        <h2>Why is ClickHouse so Fast?</h2>
        <p>&nbsp;</p>
        <p style="font-size: 40px;">&mdash; out of desperation.</p>
        <p style="font-size: 40px;">Yandex.Metrica must work.</p>
    </section>
    <section class="slide">
        <h2>Why is ClickHouse so Fast?</h2>
        <p><b>Algorithmic optimization.</b></p>
        <p>MergeTree, data locality on disk<br/>— fast range queries.</p>
        <p>Example: the uniqCombined function consists of a combination of three different data structures suitable for different cardinality ranges.</p>
        <p><b>Low-level optimization.</b></p>
        <p>Example: vectorized query execution.</p>
        <p><b>Specialization and attention to detail.</b></p>
        <p>Example: we have 17 different GROUP BY algorithms. The best one is chosen for your query.</p>
    </section>


    <section class="slide">
        <h2>What's New in ClickHouse</h2>
    </section>

    <section class="slide">
        <h2>Team</h2>
        <p>Now 5 developers.</p>
        <p>
            <img src="pictures/milovidov.jpg" style="height:150px;">
            <img src="pictures/vludv.jpg" style="height:150px;">
            <img src="pictures/ztlpn.jpg" style="height:150px;">
            <img src="pictures/proller.jpg" style="height:150px;">
            <img src="pictures/stanly.jpg" style="height:150px;">
        </p>
    </section>

<section class="slide">

<h2>Previously</h2>

<p>&mdash; HTTP and executable sources;</p>
<p>&mdash; merge optimization, vertical merge;</p>
<p>&mdash; distributed query tracing;</p>
<p>&mdash; clickhouse-local;</p>
<p>&mdash; BETWEEN, || operators;</p>
<p>&mdash; UUID - text functions;</p>

</section>
<section class="slide">

<h2>New in Query Language</h2>

<p>&mdash; KILL QUERY;</p>
<p>&mdash; LIMIT BY;</p>
<p>&mdash; SELECT INTO OUTFILE;</p>

</section>
<section class="slide">

<h2>Build</h2>

<p>&mdash; &laquo;proper&raquo; build and packages;</p>
<p>&mdash; system.build_options table;</p>

</section>
<section class="slide">

<h2>Interfaces</h2>

<p>&mdash; ability to get progress in HTTP headers;</p>
<p>&mdash; ability to skip errors in text formats;</p>
<p>&mdash; proper HTTP response codes;</p>

</section>
<section class="slide">

<h2>Dictionaries</h2>

<p>&mdash; cached external dictionary performance;</p>
<p>&mdash; cached external dictionary instrumentation;</p>
<p>&mdash; HTTPS dictionaries;</p>

</section>
<section class="slide">

<h2>Instrumentation</h2>

<p>&mdash; information about index memory usage;</p>
<p>&mdash; information about uncompressed column sizes;</p>
<p>&mdash; metrics for cache RAM consumption;</p>
<p>&mdash; metrics about merges;</p>

</section>
<section class="slide">

<h2>Optimizations</h2>

<p>&mdash; DISTINCT optimization;</p>
<p>&mdash; gzip performance in HTTP interface;</p>
<p>&mdash; mark cache optimization;</p>

</section>
<section class="slide">

<h2>Functions</h2>

<p>&mdash; proper comparison logic, least, greatest;</p>
<p>&mdash; groupUniqArray for all data types;</p>
<p>&mdash; decodeURLComponent;</p>

</section>
<section class="slide">

<h2>Something Else</h2>

<p>&mdash; protection against accidental DROP TABLE;</p>
<p>&mdash; use_client_time_zone; timezone in config;</p>
<p>&mdash; fsync_metadata;</p>

</section>
<section class="slide">

<h2>Community</h2>

<p>&mdash; integration with Grafana, Redash, Apache Zeppelin, Superset;</p>
<p>&mdash; proper packages for CentOS, RHEL, GosLinux;</p>
<p>&mdash; native protocol driver for Go and C++;</p>
<p>&mdash; ability to pass X-ClickHouse-* headers;</p>
<p>&mdash; benchmarks NYC Taxi, Percona (Spark);</p>
<p>&mdash; Greenplum benchmark;</p>
<p>&mdash; English Telegram chat;</p>
<p>&mdash; meetings and talks (Paris - February, San Francisco - April);</p>

</section>

    <section class="slide">
        <h2>ClickHouse vs. Spark</h2>
        <p>https://www.percona.com/blog/2017/02/13/clickhouse-new-opensource-columnar-database/</p>
        <img src="pictures/spark.png" style="height:60%"/>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. Greenplum</h2>
        <p><img src="pictures/greenplum.png" style="width:50%"/></p>
    </section>

<section class="slide">

<h2>TODO (March-April 2017)</h2>

<p>&mdash; distributed DDL queries;</p>
<p>&mdash; <span style="color: green">configs in ZooKeeper</span>;</p>
<p>&mdash; full NULL support;</p>

</section>
<section class="slide">

<h2>TODO (Spring-Summer 2017)</h2>

<p>&mdash; ODBC driver functionality on Windows;</p>
<p>&mdash; rewrite query analysis: proper JOIN support;</p>

</section>

<section class="slide">
    <h2>Community</h2>
    <p>Website: <a href="https://clickhouse.com/">https://clickhouse.com/</a></p>
    <p>Google groups: <a href="https://groups.google.com/forum/#!forum/clickhouse">https://groups.google.com/forum/#!forum/clickhouse</a></p>
    <p>Mailing list: clickhouse-feedback@yandex-team.com</p>
    <p>Telegram chat: <a href="https://telegram.me/clickhouse_en">https://telegram.me/clickhouse_en</a> and <a href="https://telegram.me/clickhouse_ru">https://telegram.me/clickhouse_ru</a> (already 500 participants)</p>
    <p>GitHub: <a href="https://github.com/ClickHouse/ClickHouse/">https://github.com/ClickHouse/ClickHouse/</a></p>
    <p>&nbsp;</p>
    <p>+ meetings. Moscow, Saint Petersburg, Novosibirsk... Next: Ekaterinburg, Kiev, Minsk, San Francisco...</p>
</section>

    <section class="slide">
        <h2>Bonus</h2>
    </section>


    <section class="slide">
        <h2>Connecting to ClickHouse</h2>
        <p style="font-size: 30px;">HTTP REST</p>
        <p style="font-size: 30px;">clickhouse-client</p>
        <p style="font-size: 30px;">JDBC</p>
        <p>&nbsp;</p>
        <p>Python, PHP, Go, Perl, Ruby, Node.JS, R, .NET</p>
        <p>&nbsp;</p>
        <p>Web UI: <a href="https://github.com/smi2/clickhouse-frontend">https://github.com/smi2/clickhouse-frontend</a></p>
    </section>

    <section class="slide">
        <h2 style="font-size: 40px;">ClickHouse vs. typical row-oriented DBMS</h2>
        <p>Itai Shirav:<br /><br />&laquo;I haven't made a rigorous comparison, but I did convert a time-series table with 9 million rows from Postgres to ClickHouse.</p>
        <p>Under ClickHouse queries run about 100 times faster, and the table takes 20 times less disk space. Which is pretty amazing if you ask me&raquo;.</p>
    </section>
    <section class="slide">
        <h2>&nbsp;</h2>
        <p>Bao Dang:<br /><br />&laquo;Obviously, ClickHouse outperformed PostgreSQL at any metric&raquo;.</p>
        <p><a href="https://github.com/AnalyticsGo/AnalyticsGo/issues/1">https://github.com/AnalyticsGo/AnalyticsGo/issues/1</a></p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. Vertica</h2>
        <p>Timur Shenkao:<br /><br />&laquo;ClickHouse is extremely fast at simple SELECTs without joins, much faster than Vertica&raquo;.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. PrestoDB</h2>
        <p>Ömer Osman Koçak:<br /><br />
        &laquo;When we evaluated ClickHouse the results were great compared to Prestodb. Even though the columnar storage optimizations for ORC and Clickhouse is quite similar, Clickhouse uses CPU and Memory resources more efficiently (Presto also uses vectorized execution but cannot take advantage of hardware level optimizations such as SIMD instruction sets because it's written in Java so that's fair) so we also wanted to add support for Clickhouse for our open-source analytics platform Rakam (https://github.com/rakam-io/rakam)&raquo;</p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. Spark</h2>
        <p>&laquo;I tested Clickhouse, speed is just excellent = much faster than spark on a single machine (I got about 3x, but will compare more). Also compression is better&raquo;.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. Google BigQuery</h2>
        <p>&laquo;ClickHouse shows comparable speed on <u>such query</u> for 30 days and 8 times faster (!) on <u>such query</u>. We plan to test other queries, but haven't gotten around to it yet.<br/><br/>Query execution speed is stable. In Google BigQuery during peak load periods, for example at 4:00 p.m. PDT or at the beginning of the month, query execution time can noticeably increase&raquo;.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. Druid</h2>
        <p>&laquo;This year we deployed a Druid-based build — Imply Analytics Platform, as well as Tranquility, and were ready to launch in production… But after ClickHouse came out, we immediately abandoned Druid, although we spent two months studying and implementing it&raquo;.</p>
        <p><a href="https://habrahabr.ru/company/smi2/blog/314558/">https://habrahabr.ru/company/smi2/blog/314558/</a></p>
    </section>
    <section class="slide">
        <h2>ClickHouse vs. InfiniDB</h2>
        <p>&laquo;结论：clickhouse速度更快！&raquo;</p>
        <p>&laquo;In conclusion, ClickHouse is faster!&raquo;</p>
        <p><a href="http://verynull.com/2016/08/22/infinidb与clickhouse对比/">http://verynull.com/2016/08/22/infinidb与clickhouse对比/</a></p>
        <p><img src="pictures/infinidb_cn.png" style="width:100%"/></p>
    </section>
    <section class="slide">
        <h2>ClickHouse for sensor data</h2>
        <p><img src="pictures/kaspersky.png" style="width:100%"/></p>
    </section>

    <div class="progress"></div>
    <script src="shower/shower.js"></script>
</body>
</html>
