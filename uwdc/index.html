<!DOCTYPE html>
<html lang="en">
<head>
    <title>A Bit About ClickHouse</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">

    <style type="text/css">
         span { padding: 1px 10px; background: rgba(255, 255, 255, 0.75); }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>A Bit About ClickHouse</h1>
    </header>
    <section class="slide" id="cover" style="background: url('pictures/IMG_0661.JPG') no-repeat center center; background-size: 100%">
        <h1 style="margin-top: 100px"><span>UWDC 2017</span></h1>
        <h1><span>A Bit About ClickHouse</span></h1>
    </section>
    <section class="slide">
        <h2>About Me</h2>
        <p>Alexey, ClickHouse developer.</p>
        <p>Since 2008, I worked on the data processing engine for Yandex.Metrica.</p>
    </section>
    <section class="slide">
        <h2>History</h2>
        <p>Yandex.Metrica is a web analytics service.</p>
        <p>First in Russia, second in the world.</p>
        <p><img src="pictures/metrika_market_share.png"/></p>
        <p>Daily ~25 billion events arrive.</p>
        <p>Need to show reports in real-time.</p>
    </section>
    <section class="slide">
        <h2>Old Metrica (2008–2014)</h2>
        <p>Everything worked great. Users could get approximately 50 different reports.</p>
        <p>But there's a problem. We want more. We want each report to be infinitely customizable.</p>
    </section>
    <section class="slide">
        <h2>Report Constructor</h2>
        <p>Quickly made a prototype and based on it implemented "Report Constructor".</p>
        <p>This is 2010.</p>
        <p>It became clear where to move next. </p>
        <p>We need a good column-oriented DBMS.</p>
    </section>
    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>This is how row-oriented systems work:</p>
        <p><img src="pictures/row_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>This is how column-oriented systems work:</p>
        <p><img src="pictures/column_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why ClickHouse?</h2>
        <p>Nothing ready suited us.</p>
        <p>So we made ClickHouse.</p>
        <p>&laquo;Evolution of Data Structures in Yandex.Metrica&raquo;</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/273305/">https://habrahabr.ru/company/yandex/blog/273305/</a></p>
    </section>
    <section class="slide">
        <h2>Metrica 2.0</h2>
        <img src="pictures/metrika2.png" style="height:70%"/>
    </section>
    <section class="slide">
        <h2>In Brief</h2>
        <ul>
            <li>column-oriented</li>
            <li>linear scalability</li>
            <li>fault tolerance</li>
            <li>real-time data loading</li>
            <li>online (sub-second) queries</li>
            <li>SQL dialect support + extensions<br/>(arrays, nested data structures, domain-specific functions, sampling)</li>
        </ul>
    </section>
    <section class="slide">
        <h2>Main Metrica Cluster</h2>
        <ul style="font-size:30px;">
            <li>>22 trillion rows</li>
            <li>472 servers</li>
            <li>data processing speed up to two terabytes per second</li>
        </ul>
        <p style="font-size:60%; margin-top:2em">* If you want to try ClickHouse, one server is enough.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse at Yandex</h2>
        <p>We managed to make the system relatively convenient.</p>
        <p>From the very beginning we had detailed documentation.</p>
        <p>Over a couple of years, ClickHouse spread to other Yandex departments.</p>
        <p>Mail, Market, Direct, Webmaster, AdFox, Infrastructure, Business Analytics...</p>
        <p>There are cases when analysts independently installed ClickHouse on virtual machines and successfully used it without any questions.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Then we decided — ClickHouse is too good a system for us alone to use.</p>
        <p>To make it more fun, let's get people outside hooked on ClickHouse, let them enjoy it. We decided to make it open-source.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Apache 2.0 license — minimum restrictions.</p>
        <p>Goal — maximum product distribution.</p>
        <p>We want Yandex product to be used worldwide.</p>
        <p>See "Yandex Opens ClickHouse"</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/303282/">https://habrahabr.ru/company/yandex/blog/303282/</a></p>
    </section>
    <section class="slide" style="background: url('pictures/IMG_0537.JPG') no-repeat center center; background-size: 100%">
        <h2 style="font-size: 45px;"><span>When to Use ClickHouse</span></h2>
        <p><span>Well-structured, cleaned, immutable events.</span></p>
        <p>&nbsp;</p>
        <p><span>Click stream. Web analytics. Ad networks. RTB. E-commerce.</span></p>
        <p><span>Online game analytics. Sensor and monitoring data. Telecom data.</span></p>
        <p><span>Financial transactions. Stock market analytics.</span></p>
    </section>
    <section class="slide" style="background: url('pictures/IMG_0532.JPG') no-repeat center center; background-size: 100%">
        <h2 style="font-size: 40px;"><span>When <span style="color:red;">NOT</span> to Use ClickHouse</span></h2>
        <p><span style="font-size: 30px;color: #888;">OLTP</span><br/><span>ClickHouse has no UPDATE and full transactions.</span></p>
        <p><span style="font-size: 30px;color: #888;">Key-Value</span><br/><span>If you need frequent queries to update by key, use another solution.</span></p>
        <p><span style="font-size: 30px;color: #888;">Blob-store, document oriented</span><br/><span>ClickHouse is designed for large amounts of fine-grained data.</span></p>
    </section>

<!-- Usages -->

    <section class="slide">
        <h2>ClickHouse Adoption</h2>

        <p>Hundreds of companies in Russia and nearby<br/>Yandex, Mail.ru, Rambler, SKB Kontur&hellip;</p>
        <p>Dozens of companies in Europe, USA, China<br/>Cloudflare, Wikimedia, Lifestreet&hellip;</p>
    </section>

    <section class="slide">
        <h2 style="font-size: 30pt;">Unusual ClickHouse Use Cases</h2>

        <p>Search engine and analytics for Bitcoin transactions:
        <br/><a href="https://blockchair.com/">https://blockchair.com/</a></p>

        <p>"Quite large tables are running, using only one server and everything works very fast — with any filters and sorting, almost instantaneous."</p>

        <p>Bioinformatics - evolutionary genetics:
        <br/><a href="https://github.com/msestak/FindOrigin">https://github.com/msestak/FindOrigin</a></p>

        <p>"We are exploring evolution of novel genes in genomes because it seems that genomes are far from being static as previously believed and what actually happens is that new genes are constantly being added and old genes are lost."</p>

        <p>LHCb experiment at CERN:
        <br/><a href="https://www.yandex.com/company/press_center/press_releases/2012/2012-04-10/">https://www.yandex.com/company/press_center/press_releases/2012/2012-04-10/</a></p>
    </section>

<!-- Performance -->

    <section class="slide" style="background: url('pictures/IMG_0539.JPG') no-repeat center center; background-size: 100%">
        <h1 style="margin-top: 200px"><span>Why is ClickHouse so fast?</span></h1>
    </section>


    <section class="slide">
        <h2>Why is ClickHouse so fast?</h2>
        <p>&nbsp;</p>
        <p style="font-size: 40px;">&mdash; out of desperation.</p>
        <p style="font-size: 40px;">Yandex.Metrica must work.</p>
    </section>

    <section class="slide">
        <h2>Why is ClickHouse so fast?</h2>
        <p>To quickly process an analytical query, the system must:<br/>&nbsp;</p>
        <p style="font-size: 40px;">1. Read fast.</p>
        <p style="font-size: 40px;">2. Compute fast.</p>
    </section>

    <section class="slide">
        <h2>Why is ClickHouse so fast?</h2>
        <p style="font-size: 40px;">1. Read fast.</p>

        <p>&ndash; locality by primary key;
        <br/>&ndash; columns - read only what's needed;
        <br/>&ndash; strict typing;
        <br/>&ndash; data compression.</p>

        <p style="font-size: 40px;">2. Compute fast.</p>

        <p>&ndash; vectorized engine;
        <br/>&ndash; specialization of data structures;
        <br/>&ndash; low-level optimizations.</p>
    </section>

    <section class="slide">
        <h2>Why is ClickHouse so fast?</h2>
        <p><b>Algorithmic optimization.</b></p>
        <p>MergeTree, data locality on disk<br/>— fast range queries.</p>
        <p>Example: uniqCombined function consists of a combination of three different data structures, suitable for different cardinality ranges.</p>
        <p><b>Low-level optimization.</b></p>
        <p>Example: vectorized query execution.</p>
        <p><b>Specialization and attention to detail.</b></p>
        <p>Example: we have 17 different algorithms for GROUP BY. The best one is chosen for your query.</p>
    </section>

<!-- Benchmarks -->

    <section class="slide">
        <h2>ClickHouse vs. Spark</h2>
        <p>https://www.percona.com/blog/2017/02/13/clickhouse-new-opensource-columnar-database/</p>
        <img src="pictures/spark.png" style="height:60%"/>
    </section>

    <section class="slide">
        <h2 style="font-size: 40px;">ClickHouse vs. typical row-oriented DBMS</h2>
        <p>Itai Shirav:<br /><br />&laquo;I haven't made a rigorous comparison, but I did convert a time-series table with 9 million rows from Postgres to ClickHouse.</p>
        <p>Under ClickHouse queries run about 100 times faster, and the table takes 20 times less disk space. Which is pretty amazing if you ask me&raquo;.</p>
    </section>

    <section class="slide">
        <h2>&nbsp;</h2>
        <p>Bao Dang:<br /><br />&laquo;Obviously, ClickHouse outperformed PostgreSQL at any metric&raquo;.</p>
        <p><a href="https://github.com/AnalyticsGo/AnalyticsGo/issues/1">https://github.com/AnalyticsGo/AnalyticsGo/issues/1</a></p>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. Vertica</h2>
        <p>Timur Shenkao:<br /><br />&laquo;ClickHouse is extremely fast at simple SELECTs without joins, much faster than Vertica&raquo;.</p>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. PrestoDB</h2>
        <p>Ömer Osman Koçak:<br /><br />
        &laquo;When we evaluated ClickHouse the results were great compared to Prestodb. Even though the columnar storage optimizations for ORC and Clickhouse is quite similar, Clickhouse uses CPU and Memory resources more efficiently (Presto also uses vectorized execution but cannot take advantage of hardware level optimizations such as SIMD instruction sets because it's written in Java so that's fair) so we also wanted to add support for Clickhouse for our open-source analytics platform Rakam (https://github.com/rakam-io/rakam)&raquo;</p>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. Google BigQuery</h2>
        <p>&laquo;ClickHouse shows comparable speed on <u>such query</u> for 30 days and 8 times faster (!) on <u>such query</u>. We plan to test other queries as well, haven't gotten to it yet.<br/><br/>Query execution speed is stable. In Google BigQuery during peak loads, for example at 4:00 p.m. PDT or at the beginning of the month, query execution time can noticeably increase&raquo;.</p>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. Druid</h2>
        <p>&laquo;This year we deployed a setup based on Druid — Imply Analytics Platform, as well as Tranquility, and were ready to launch to production… But after ClickHouse came out we immediately abandoned Druid, even though we spent two months studying and implementing it&raquo;.</p>
        <p><a href="https://habrahabr.ru/company/smi2/blog/314558/">https://habrahabr.ru/company/smi2/blog/314558/</a></p>
    </section>

    <section class="slide">
        <h2>ClickHouse vs. InfiniDB</h2>
        <p>&laquo;结论：clickhouse速度更快！&raquo;</p>
        <p>&laquo;In conclusion, ClickHouse is faster!&raquo;</p>
        <p><a href="http://verynull.com/2016/08/22/infinidb与clickhouse对比/">http://verynull.com/2016/08/22/infinidb与clickhouse对比/</a></p>
        <p><img src="pictures/infinidb_cn.png" style="width:100%"/></p>
    </section>

<!-- Interfaces -->

    <section class="slide" style="background: url('pictures/IMG_0399.JPG') no-repeat center center; background-size: 100%">
        <h2><span>Connecting to ClickHouse</span></h2>
        <p style="font-size: 30px;"><span>HTTP REST</span></p>
        <p style="font-size: 30px;"><span>clickhouse-client</span></p>
        <p style="font-size: 30px;"><span>JDBC (production), ODBC (beta)</span></p>
        <p>&nbsp;</p>
        <p style="font-size: 30px;"><span>Python, PHP (incl. Doctrine, Yii2), Perl, Go,<br/>Node.js, Ruby, C++, .NET, Scala, R, Julia, Rust</span></p>
    </section>

    <section class="slide">
        <h2 style="font-size: 40px;">Integration with Visual Tools</h2>
        <p style="font-size: 30px;">Tabix (tabix.io) &mdash; developed specifically for ClickHouse.</p>
        <p style="font-size: 30px;"><img style="float: left; padding-right: 20px;" src="pictures/tabix.gif" width="300" />As well as:<br/><br/>Grafana, Redash, Apache Zeppelin,<br/>Superset, Power BI&hellip;</p>
    </section>


    <section class="slide">
        <h2><span>Community</span></h2>
        <p><span>Website: <a href="https://clickhouse.com/">https://clickhouse.com/</a></span></p>
        <p><span>Google groups: <a href="https://groups.google.com/forum/#!forum/clickhouse">https://groups.google.com/forum/#!forum/clickhouse</a></span></p>
        <p><span>Mailing list: clickhouse-feedback@yandex-team.com</span></p>
        <p><span>Telegram chat: <a href="https://telegram.me/clickhouse_en">https://telegram.me/clickhouse_en</a> and <a href="https://telegram.me/clickhouse_ru">https://telegram.me/clickhouse_ru</a> (already 680 members)</span></p>
        <p><span>GitHub: <a href="https://github.com/ClickHouse/ClickHouse/">https://github.com/ClickHouse/ClickHouse/</a></span></p>
        <p>&nbsp;</p>
        <p><span>+ meetups. Moscow, St. Petersburg, Novosibirsk,<br/>Yekaterinburg, San Francisco... Next: Kyiv, Minsk...</span></p>
    </section>

    <section class="slide" style="background: url('pictures/IMG_0421.JPG') no-repeat center center; background-size: 100%">
        <h2><span>?</span></h2>
    </section>

    <div class="progress"></div>
    <script src="shower/shower.min.js"></script>
</body>
</html>
