<!DOCTYPE html>
<html lang="en" style="background-color: #FFF;">
<head>
    <title>ClickHouse meetup in Minsk</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="pictures/IMG_2640.JPG">
    <meta property="og:title" content="ClickHouse meetup in Minsk">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="pictures/IMG_2640.JPG">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/screen-16x10.css">

    <style type="text/css">
         span { padding: 1px 10px; background: rgba(255, 255, 255, 0.75); }
         code { display: block; background-color: #EEE; }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>ClickHouse meetup in Minsk</h1>
    </header>

    <section class="slide" id="cover" style="background: url('pictures/IMG_2640.JPG') no-repeat center center; background-size: 100%">
        <h1 style="font-size: 36pt"><span>ClickHouse meetup in Minsk</span></h1>
    </section>

    <section class="slide">
        <h2><span>ClickHouse: Present and Future</span></h2>
    </section>

    <section class="slide">
        <h2>What is ClickHouse?</h2>
        <p>ClickHouse - distributed analytical column-oriented DBMS</p>
    </section>

    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>How row-oriented systems work:</p>
        <p><img src="pictures/row_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why column-oriented?</h2>
        <p>How column-oriented systems work:</p>
        <p><img src="pictures/column_oriented.gif"/></p>
    </section>
    <section class="slide">
        <h2>Why ClickHouse?</h2>
        <p>Nothing ready-made was suitable.</p>
        <p>So we made ClickHouse.</p>
        <p>&laquo;Evolution of Data Structures in Yandex.Metrica&raquo;</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/273305/">https://habrahabr.ru/company/yandex/blog/273305/</a></p>
    </section>
    <section class="slide">
        <h2>Metrica 2.0</h2>
        <img src="pictures/metrika2.png" style="height:70%"/>
    </section>
    <section class="slide">
        <h2>In Brief</h2>
        <ul>
            <li>column-oriented</li>
            <li>linear scalability</li>
            <li>fault tolerance</li>
            <li>real-time data loading</li>
            <li>online (sub-second) queries</li>
            <li>SQL dialect support + extensions<br/>(arrays, nested data structures, domain-specific functions, sampling)</li>
        </ul>
    </section>
    <section class="slide">
        <h2>Main Metrica Cluster</h2>
        <ul style="font-size:30px;">
            <li>>23 trillion rows</li>
            <li>500 servers</li>
            <li>data processing speed up to two terabytes per second</li>
        </ul>
        <p style="font-size:60%; margin-top:2em">* If you want to try ClickHouse, one server is enough.</p>
    </section>
    <section class="slide">
        <h2>ClickHouse at Yandex</h2>
        <p>We managed to make the system relatively user-friendly.</p>
        <p>From the very beginning we had detailed documentation.</p>
        <p>Within a couple of years, ClickHouse spread to other Yandex departments.</p>
        <p>Mail, Market, Direct, Webmaster, AdFox, Infrastructure, Business Analytics...</p>
        <p>There are cases when analysts independently installed ClickHouse on virtual machines and successfully used it without any questions.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Then we decided — ClickHouse is too good a system for us to keep it to ourselves.</p>
        <p>To make it more fun, we need to get people outside hooked on ClickHouse, let them enjoy it. We decided to go open-source.</p>
    </section>
    <section class="slide">
        <h2>Open-source</h2>
        <p>Apache 2.0 license — minimum restrictions.</p>
        <p>Goal — maximum product distribution.</p>
        <p>We want Yandex's product to be used worldwide.</p>
        <p>See "Yandex Opens ClickHouse"</p>
        <p><a href="https://habrahabr.ru/company/yandex/blog/303282/">https://habrahabr.ru/company/yandex/blog/303282/</a></p>
    </section>
    <section class="slide">
        <h2 style="font-size: 40px;">When to Use ClickHouse</h2>
        <p>Well-structured, cleaned, immutable events.</p>
        <p>&nbsp;</p>
        <p>Click stream. Web analytics. Ad&nbsp;networks. RTB. E-commerce.</p>
        <p>Online game analytics. Sensor and monitoring data. Telecom&nbsp;data.</p>
        <p>Financial transactions. Stock market analytics.</p>
    </section>
    <section class="slide">
        <h2 style="font-size: 40px;"><span>When <span style="color:red;">NOT to</span> Use ClickHouse</span></h2>
        <p><span style="font-size: 30px;color: #888;">OLTP</span><br/><span>ClickHouse has no UPDATE and full-fledged transactions.</span></p>
        <p><span style="font-size: 30px;color: #888;">Key-Value</span><br/><span>If you need frequent update queries by key, use another solution.</p>
        <p><span style="font-size: 30px;color: #888;">Blob-store, document oriented</span><br/><span>ClickHouse is designed for a large number of fine-grained data.</span></p>
        <p><span style="font-size: 30px;color: #888;">Over-normalized data</span><br/><span>Better to make a wide fact table.</span></p>
    </section>
    <section class="slide">
        <h2 style="font-size: 40px;">Why is ClickHouse so Fast?</h2>
        <p>&nbsp;</p>
        <p style="font-size: 40px;">&mdash; out of desperation.</p>
        <p style="font-size: 40px;">Yandex.Metrica must work.</p>
    </section>
    <section class="slide">
        <h2 style="font-size: 40px;">Why is ClickHouse so Fast?</h2>
        <p><b>Algorithmic optimization.</b></p>
        <p>MergeTree, data locality on disk<br/>— fast range queries.</p>
        <p>Example: the uniqCombined function consists of a combination of three different data structures suitable for different cardinality ranges.</p>
        <p><b>Low-level optimization.</b></p>
        <p>Example: vectorized query execution.</p>
        <p><b>Specialization and attention to detail.</b></p>
        <p>Example: we have 17 different GROUP BY algorithms. The best one is chosen for your query.</p>
    </section>

<section class="slide">
<h2>ClickHouse Adoption</h2>

<p>Hundreds of companies in Russia and nearby<br/>Yandex, Mail.ru, Rambler, SKB Kontur&hellip;</p>
<p>Dozens of companies in Europe, USA, China<br/>Cloudflare, Wikimedia, Lifestreet, Vertamedia, Carto&hellip;</p>

</section>

    <section class="slide">
        <h2>CloudFlare</h2>
        <p>How do we analyze over O(100B) DNS requests daily.</p>
        <p>"ClickHouse enables us and our customers to explore the the dataset in real time to get operational insights. Due to many of the optimizations built into ClickHouse we are able to store the data for a long time allowing us to look events is perspective and at historical trends."</p>
    </section>

    <section class="slide">
        <h2>Wikimedia.org</h2>
        <p>"clickhouse is a columnar datastore that we are using as an aid to run complex SQL queries on the edit data "lake" that we have as a result of the edit reconstruction project. It is similar to Druid but faster for complex queries."</p>
    </section>

<section class="slide">
<h2 style="font-size: 40px;">Unusual ClickHouse Use Cases</h2>

<p>Search engine and analytics for Bitcoin transactions:
<br/><a href="https://blockchair.com/">https://blockchair.com/</a></p>

<p>"Pretty large tables are running, only one server is used and everything works very quickly — with any filters and sorting, everything is almost instantaneous."</p>

<p>Bioinformatics - evolutionary genetics:
<br/><a href="https://github.com/msestak/FindOrigin">https://github.com/msestak/FindOrigin</a></p>

<p>"We are exploring evolution of novel genes in genomes because if seems that genomes are far from being static as previously believed and what actually happens is that new genes are constantly being added and old genes are lost."</p>

<p>LHCb experiment at LHC:
<br/><a href="https://www.yandex.com/company/press_center/press_releases/2012/2012-04-10/">https://www.yandex.com/company/press_center/press_releases/2012/2012-04-10/</a></p>

</section>

<section class="slide">
    <h2>Independent Benchmarks</h2>
    <p>ClickHouse vs. Spark &amp; MariaDB Column Store</p>
    <p style="font-size: 12pt;">https://www.percona.com/blog/2017/02/13/clickhouse-new-opensource-columnar-database/</p>
    <img src="pictures/spark.png" style="height:60%"/>
</section>

<section class="slide">
    <h2>Independent Benchmarks</h2>
    <p>ClickHouse vs. Redshift</p>
    <p>https://www.altinity.com/blog/2017/6/20/clickhouse-vs-redshift</p>
    <img src="pictures/redshift.png" style="height:60%"/>
</section>

<section class="slide">
    <h2>Interfaces</h2>
    <p style="font-size: 30px;">HTTP REST</p>
    <p style="font-size: 30px;">clickhouse-client</p>
    <p style="font-size: 30px;">JDBC (production), ODBC (beta)</p>
    <p>&nbsp;</p>
    <p style="font-size: 30px;">Python, PHP, Perl, Go,<br/>Node.js, Ruby, C++, .NET, Scala, R, Julia, Rust</p>
</section>

<section class="slide">
    <h2 style="font-size: 32px;">Integrations with Data Visualization Systems</h2>
    <p style="font-size: 30px;">Tabix (tabix.io) &mdash; developed specifically for ClickHouse.</p>
    <p style="font-size: 30px;"><img style="float: left; padding-right: 20px;" src="pictures/tabix.gif" width="300" />And more:<br/><br/>Grafana, Redash, Apache Zeppelin,<br/>Superset, Power&nbsp;BI&hellip;</p>
</section>



    <section class="slide">
        <h2><span>What's New in ClickHouse</span></h2>
    </section>

<section class="slide">
<h2 style="font-size: 40px;">Usability and SQL Compatibility</h2>

<p>Session support in HTTP interface:
<br/><br/><code style="font-size: 14pt;">curl 'http://host:port/?session_id=123&amp;session_timeout=60' \<br /> -d 'CREATE TEMPORARY TABLE t'</code></p>

<p>Table aliases<br />Qualified column names in queries:
<br/><br/><code>SELECT t.column FROM table AS t</code></p>

<p>Quoted identifiers according to ANSI SQL:
<br/><br/><code>SELECT "column" FROM "db"."table"</code></p>
</section>

<section class="slide">
<h2>Usability Improvements</h2>

<p>Type casting for Merge-type tables</p>
<p>input_format_allow_errors_* settings</p>
<p>Loading part of configuration from ZK</p>
<p>OPTIMIZE TABLE ... PARTITION ... DEDUPLICATE</p>
<p>ALTER of primary key: Enum, Date &lt;-> UInt16, DateTime &lt;-> UInt32</p>
</section>

<section class="slide">
<h2>Distributed Queries</h2>

<p>Distributed DDL queries:
<br/><br/><code>CREATE TABLE table ON CLUSTER cluster ...</code></p>
<p>Disabling lagging replicas</p>
<p>Disabling replicas without the table</p>
<p>Original query source in system.processes, system.query_log</p>
</section>

<section class="slide">
<h2>Dictionaries</h2>

<p>Dictionary table engine, Dictionary database engine:
<br/><br/><code>CREATE DATABASE dictionaries ENGINE = Dictionary</code></p>
<p>Reloading dictionaries using user-defined state query</p>
<p>IP Trie dictionaries</p>
</section>

<section class="slide">
<h2>INSERT SELECT Convenience</h2>

<p>Type casting in INSERT SELECT</p>
<p>INSERT SELECT: by positions instead of names</p>
</section>

<section class="slide" style="background: url('pictures/Minsk.png') no-repeat center center; background-size: 100%">
<h2><span>GIS Functions</span></h2>

<p><span>pointInEllipses</span></p>
<p><span>greatCircleDistance</span></p>
</section>

<section class="slide">
<h2>Aggregate Functions</h2>

<p>-ForEach combinator</p>
<p>groupArrayInsertAt</p>
<p>topK (beta)</p>
</section>

<section class="slide">
<h2>Interfaces</h2>

<p>ODBC driver &mdash; build and functionality on Windows</p>
<p>HTTPS server</p>
</section>

<section class="slide">
<h2>NULLs (<s>beta</s> gamma)</h2>

<p>NULL for JOIN: join_use_nulls setting</p>
<p>NULLS FIRST, LAST for ORDER BY</p>
<p>NULL support in IN</p>
<p>NULL support in higher-order functions</p>
<p>if, multiIf, ifNull, nullIf, coalesce</p>
<p>toNullable, assumeNotNull</p>
<p>Nullable type support in aggregate functions</p>
<p>NULL as result of subquery returning empty set</p>
</section>

<section class="slide">
<h2>And More</h2>

<p>ALTER ... CLEAR COLUMN ... IN PARTITION</p>
<p>preferred_block_size_bytes setting</p>
</section>

<section class="slide" style="font-size: 70%;">
<h2>But That's Not All</h2>

<p style="margin-top: -30px;">KILL QUERY
<br/>LIMIT BY
<br/>SELECT INTO OUTFILE
<br/>clickhouse-local
<br/>cross-replication
<br/>UUID and MAC encoding functions
<br/>Proper HTTP response codes
<br/>Proper comparison operation logic
<br/>Progress in HTTP headers
<br/>Cache stampede fix
<br/>system.build_options, system.graphite
<br/>Distributed query tracing in system.processes, system.query_log
<br/>Ability to skip errors in text formats
<br/>fsync_metadata setting
<br/>timezone config parameter, timezone() function
<br/>decodeURLComponent
<br/>Faster gzip in HTTP interface
<br/>max_table_size_to_drop
<br/>proper build and packages
<br/>DISTINCT speedup
<br/>Buffer table optimization
<br/>FixedString optimization
<br/>RIGHT/FULL JOIN improvements
<br/>clickhouse --extract-from-config
<br/>system.parts - exact row count
<br/>system.columns - uncompressed size
<br/>system.part_log</p>
</section>

<section class="slide" style="background: url('pictures/IMG_2441.JPG') no-repeat center center; background-size: 100%">
<h2><span>Roadmap</span></h2>
</section>

<section class="slide">
<h2>July 2017</h2>

<p>SYSTEM queries</p>
<p>Limit on concurrent replica downloads</p>
<p>NULLs: fix almost all remaining issues</p>
</section>

<section class="slide">
<h2>Q3-Q4 2017</h2>

<p>Custom partitioning key for MergeTree</p>
<p>Ability to write JOIN as in regular SQL</p>
<p>Resource pools (CPU, disk IO, network bandwidth) for queries</p>
</section>

<section class="slide">
<h2><span>Q4-Q5 2017</span></h2>

<p><span>Initial UPDATE/DELETE support</span></p>
</section>


<section class="slide">
    <h2>Community</h2>
    <p>Website: <a href="https://clickhouse.com/">https://clickhouse.com/</a></p>
    <p>Google groups: <a href="https://groups.google.com/forum/#!forum/clickhouse">https://groups.google.com/forum/#!forum/clickhouse</a></p>
    <p>Mailing list: clickhouse-feedback@yandex-team.com</p>
    <p>Telegram chat: <a href="https://telegram.me/clickhouse_en">https://telegram.me/clickhouse_en</a> and <a href="https://telegram.me/clickhouse_ru">https://telegram.me/clickhouse_ru</a> (already 778 participants)</p>
    <p>GitHub: <a href="https://github.com/ClickHouse/ClickHouse/">https://github.com/ClickHouse/ClickHouse/</a></p>
    <p>&nbsp;</p>
    <p>+ meetings. Moscow, Saint Petersburg, Novosibirsk, San Francisco<br/> Ekaterinburg, Minsk... Next: Nizhny Novgorod, Kazan, Berlin</p>
</section>

    <section class="slide" style="background: url('pictures/IMG_2584.JPG') no-repeat center center; background-size: 100%">
        <h2><span>Thank You!</span></h2>
    </section>

    <div class="progress"></div>
    <script src="shower/shower.min.js"></script>
</body>
</html>
