<!DOCTYPE html>
<html lang="en">
<head>
    <title>Vector Search in ClickHouse</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:image" content="pictures/preview.jpg">
    <meta property="og:title" content="Vector Search in ClickHouse">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="pictures/preview.jpg">
    <link rel="stylesheet" href="shower/themes/yandex/styles/screen-16x9.css">

    <style type="text/css">
         code { display: block; white-space: pre; background-color: #EEE; }
         p.cloud { text-align: center; line-height: 1.6; font-size: 12pt; }
         p.cloud span { color: gray; padding: 0 20px 0 20px; white-space: nowrap; }
    </style>
</head>
<body class="shower list">
    <header class="caption">
        <h1>Vector Search in ClickHouse</h1>
    </header>
    <section class="slide" id="cover">
        <img src="https://presentations.clickhouse.com/original_website/logo.svg" style="width: 15%; position: absolute; right: 20px; bottom: 20px;" />
        <h1 style="margin-top: 80px; line-height: 150%; color: black; font-size: 64pt">Vector Search<br/>in ClickHouse</h1>
    </section>

<section class="slide">
<h2>Vector Similarity Search in ClickHouse</h2>
<p>VSS &mdash; searching for similar objects in unstructured data:</p>
<p>&mdash; Search for similar objects by their embeddings.</p>
<p>&mdash; Using indexes in multidimensional spaces.</p>
<p>&mdash; In data exceeding memory capacity and single machine.</p>
<p>&mdash; Dynamically updatable indexes.</p>
</section>

<section class="slide">
<h2>Relevance, Demand</h2>
<p>The Vector Similarity Search direction is developing right now<br/>
and combines two modern directions of engineering thought:<br/>
machine learning and big data processing.</p>
<p>Examples:</p>
<p>Google announcement, December 13, 2021:<br/>"Find anything blazingly fast with Google's vector search technology"
<br/>&mdash; proprietary technology for Cloud customers.</p>
<p>New startup companies around this technology: Cohere.ai</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>1. Dataset preparation:</p>
<p>&mdash; images from the internet (400 million images);</p>
<p>&mdash; social media comments (Reddit, Hacker News dumps);</p>
<p>&mdash; source code files (10 million repositories);</p>
<p>&mdash; HTML pages (6 million websites).</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>2. Study of algorithms and their implementations:</p>
<p>&mdash; hnswlib (Hierarchical Navigable Small World Graphs);
<br/>&mdash; redis-hnsw (implementation in Redis);
<br/>&mdash; nmslib (Non-Metric Space Library);
<br/>&mdash; Faiss;
<br/>&mdash; ScaNN;
</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>3. Baseline &mdash; testing brute-force search:</p>
<p>&mdash; search by full enumeration with on-the-fly Lp metric calculation.</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>4. Choosing data structure for the index:</p>
<p>&mdash; monolithic index, fully loaded into memory;</p>
<p>&mdash; sparse index with granule statistics,
<br/>&emsp; variants in external memory;</p>
<p>&mdash; experiments in building locality sensitive hashes
<br/>&emsp; using grid in VP-tree and space-filling curves.</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>5. Implementation of data structures in ClickHouse.</p>
<p style="color: gray;">--- this is where all the most interesting things happen ---</p>
</section>

<section class="slide">
<h2>What We Will Do</h2>
<p>6. Conducting experiments and comparative testing:</p>
<p>&mdash; memory consumption;
<br/>&mdash; search performance;
<br/>&mdash; index loading speed;
<br/>&mdash; result accuracy.</p>
<p>Performance optimization.</p>
<p>Development of tests and documentation.</p>
</section>

<section class="slide">
<h2>Technology Stack</h2>
<p>90% C++
<br/>10% Python (data preparation)</p>
<p>Knowledge areas:
<br/>&mdash; Databases and distributed systems;
<br/>&mdash; Algorithms and data structures;
<br/>&mdash; Machine learning.
</p>
<p>Resources in the Cloud will be provided for the work.</p>
</section>

<section class="slide">
<h2>Requirements</h2>
<p>&mdash; 4..6 people in the team;
<br/>&mdash; confident knowledge of C++.</p>
<h2>Contacts</h2>
<p>Team leader &mdash; Artur Filatyenkov,
<br/>Telegram @illusion_cat.</p>
<p>Project supervisor &mdash; Alexey Milovidov,
<br/>Telegram @milovidov_an.</p>
</section>

<section class="slide">
<h2>Q&amp;A</h2>
</section>


    <div class="progress"></div>
    <script src="shower/shower.min.js"></script>

    <!--Video plugin-->
    <link rel="stylesheet" href="shower/shower-video.css">
    <script src="shower/shower-video.js"></script>
    <!--/Video plugin-->
</body>
</html>
